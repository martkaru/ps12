\documentclass[a4paper,oneside]{article}
\usepackage[utf8]{inputenc}
\usepackage{mathtools}
\begin{document}
\title{Programmikeelte semantika 2012\\
Koduülesanded 1}
\author{Mart Karu}
\date{Aprill 2012}
\maketitle
\section{Ülesanne 1}
\subsection{Loomulikus operatsioonisemantikas}

\[
  \frac{
    \cfrac{
      \langle y := y-x, s_0 \rangle \rightarrow s_1
    }{
      \langle
        \text{if } x \leq y
          \text{ then } y := y-x
          \text{ else } x := x-y
        , s_0
      \rangle \rightarrow s_1
    }
    \quad
    T_1
  }{
    \langle 
    \text{while } x \neq  y \text{ do }
      (\text{if } x \leq y
        \text{ then } y := y-x
        \text{ else } x := x-y)
      , s_0
    \rangle \rightarrow s_4
  }
\]

\[
  T_1 = \frac{
    \cfrac{
      \langle x := x-y, s_1 \rangle \rightarrow s_2
    }{
      \langle 
        \text{if } x \leq y
          \text{ then } y := y-x
          \text{ else } x:= x-y
        , s_1
      \rangle \rightarrow s_2
    }
    \quad
    T_2
  }{
    \langle 
    \text{while } x \neq y \text{ do }
      (\text{if } x \leq y
        \text{ then } y := y-x
        \text{ else } x:= x-y)
      , s_1
    \rangle \rightarrow s_4
  }
\]

\[
  T_2 = \frac{
    \cfrac{
      \langle y := y-x, s_2 \rangle \rightarrow s_3
    }{
      \langle 
        \text{if } x \leq y
          \text{ then } y := y-x
          \text{ else } x := x-y
        , s_2
      \rangle \rightarrow s_3
    }
    \quad
    T_3
  }{
    \langle 
    \text{while} x \neq  y \text{ do }
      (\text{if } x \leq y
        \text{ then } y := y-x
        \text{ else } x := x-y)
      , s_2
    \rangle \rightarrow s_4
  }
\]
\[
  T_3 = \frac{
    \cfrac{
      \langle x := x-y, s_3 \rangle \rightarrow s_4
    }{
      \langle
        \text{if } x \leq y
          \text{ then } y := y-x
          \text{ else } x := x-y
        , s_3
      \rangle \rightarrow s_4
    }
  }{
    \langle
    \text{while } x \neq y \text{ do }
      (\text{if } x \leq y
        \text{ then } y := y-x
        \text{ else } x := x-y )
      , s_1
    \rangle \rightarrow s_4
  }
\]

\[s_0 = [x \mapsto 30, y \mapsto 42]\]
\[s_1 = [x \mapsto 30, y \mapsto 12]\]
\[s_2 = [x \mapsto 18, y \mapsto 12]\]
\[s_3 = [x \mapsto 6, y \mapsto 12]\]
\[s_4 = [x \mapsto 6, y \mapsto 6]\]

\subsection{Struktuurses operatsioonisemantikas}

\[
  \langle
  \text{while } x \neq y \text{ do }
  (\text{if } x \leq y
    \text{ then } y := y-x
    \text{ else } x := x-y), s
  \rangle
\]
\[
  (1) \Rightarrow
  \langle
  \text{while } x \neq y \text{ do }
  (\text{ if } x \leq y
    \text{ then } y := y-x
    \text{ else } x := x-y),
    s[y \mapsto 12]
  \rangle
\]
\[
  (2) \Rightarrow
  \langle
  \text{while } x \neq y \text{ do }
  (\text{ if } x \leq y
    \text{ then } y := y-x
    \text{ else } x := x-y),
    s[y \mapsto 12][x \mapsto 18]
  \rangle
\]
\[
  (3) \Rightarrow
  \langle
  \text{while } x \neq y \text{ do }
  (\text{ if } x \leq y
    \text{ then } y := y-x
    \text{ else } x := x-y),
    s[y \mapsto 12][x \mapsto 6]
  \rangle
\]
\[
  (4) \Rightarrow
  \langle
  \text{while } x \neq y \text{ do }
  (\text{ if } x \leq y
    \text{ then } y := y-x
    \text{ else } x := x-y),
    s[y \mapsto 6][x \mapsto 6]
  \rangle
\]
\[
  \Rightarrow
  s[y \mapsto 6][x \mapsto 6]
\]

(1):

\[
\langle
\text{while } x \neq y \text{ do }
(\text{ if } x \leq y
  \text{ then } y := y-x
  \text{ else } x := x-y),
  s
\rangle
\]
\(
  \Rightarrow
  \text{ if } x \neq y
  \text{ then } (
    (\text{ if } x \leq y
      \text{ then } y := y-x
      \text{ else } x := x-y) 
    );
    \text{while } x \neq y \text{ do }
    (\text{ if } x \leq y
      \text{ then } y := y-x
      \text{ else } x := x-y),
  )
  \text{ else skip }  ,s
\)

\end{document}
